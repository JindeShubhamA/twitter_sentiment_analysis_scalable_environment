FROM python:3.6-alpine

# bash is needed by spark
RUN apk add --no-cache bash openjdk8-jre


COPY ./src/requirements.txt ./requirements.txt

# purge the pip cache at the end since we don't have a need for it inside an image
RUN pip3 install --upgrade pip && \
    pip3 install -r requirements.txt && \
    pip3 cache purge

ENV JAVA_HOME /usr/
RUN export JAVA_HOME